(()=>{var e={7562:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.sdk=t.MixinDeviceBase=t.ScryptedDeviceBase=void 0,o(r(4192),t);const i=r(4192),s=r(3339);class a extends i.DeviceBase{constructor(e){super(),this.nativeId=e}get storage(){return this._storage||(this._storage=t.sdk.deviceManager.getDeviceStorage(this.nativeId)),this._storage}get log(){return this._log||(this._log=t.sdk.deviceManager.getDeviceLogger(this.nativeId)),this._log}get console(){return this._console||(this._console=t.sdk.deviceManager.getDeviceConsole(this.nativeId)),this._console}async createMediaObject(e,r){return t.sdk.mediaManager.createMediaObject(e,r,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:t.sdk.deviceManager.getMixinConsole(e.sourceId,this.nativeId)}_lazyLoadDeviceState(){this._deviceState||(this.nativeId?this._deviceState=t.sdk.deviceManager.getDeviceState(this.nativeId):this._deviceState=t.sdk.deviceManager.getDeviceState())}onDeviceEvent(e,r){return t.sdk.deviceManager.onDeviceEvent(this.nativeId,e,r)}}t.ScryptedDeviceBase=a;class c extends i.DeviceBase{constructor(e){super(),this._listeners=new Set,this.mixinDevice=e.mixinDevice,this.mixinDeviceInterfaces=e.mixinDeviceInterfaces,this.mixinStorageSuffix=e.mixinStorageSuffix,this._deviceState=e.mixinDeviceState,this.nativeId=t.sdk.systemManager.getDeviceById(this.id).nativeId,this.mixinProviderNativeId=e.mixinProviderNativeId,this._deviceState.__rpcproxy_traps_all_properties&&"string"==typeof this._deviceState.id&&(this._deviceState=t.sdk.deviceManager.createDeviceState(this._deviceState.id,this._deviceState.setState))}get storage(){if(!this._storage){const e=this.mixinStorageSuffix,r=this.id+(e?":"+e:"");this._storage=t.sdk.deviceManager.getMixinStorage(r,this.mixinProviderNativeId)}return this._storage}get console(){return this._console||(t.sdk.deviceManager.getMixinConsole?this._console=t.sdk.deviceManager.getMixinConsole(this.id,this.mixinProviderNativeId):this._console=t.sdk.deviceManager.getDeviceConsole(this.mixinProviderNativeId)),this._console}async createMediaObject(e,r){return t.sdk.mediaManager.createMediaObject(e,r,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:t.sdk.deviceManager.getMixinConsole(e.sourceId,this.mixinProviderNativeId)}onDeviceEvent(e,r){return t.sdk.deviceManager.onMixinEvent(this.id,this,e,r)}_lazyLoadDeviceState(){}manageListener(e){this._listeners.add(e)}release(){for(const e of this._listeners)e.removeListener()}}t.MixinDeviceBase=c,function(){function e(e){return function(){return this._lazyLoadDeviceState(),this._deviceState?.[e]}}function t(e){return function(t){this._lazyLoadDeviceState(),this._deviceState?this._deviceState[e]=t:console.warn("device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.")}}for(const r of Object.values(i.ScryptedInterfaceProperty))r!==i.ScryptedInterfaceProperty.nativeId&&(Object.defineProperty(a.prototype,r,{set:t(r),get:e(r)}),Object.defineProperty(c.prototype,r,{set:t(r),get:e(r)}))}(),t.sdk={};try{let e=!1;if(process.env.SCRYPTED_SDK_MODULE)try{{const r=(0,s.createRequire)("file:///Users/gianlucaruocco/Documents/Git/scrypted-reolink-utilities/node_modules/@scrypted/sdk/dist/src/index.js")(process.env.SCRYPTED_SDK_MODULE);Object.assign(t.sdk,r.getScryptedStatic()),e=!0}}catch(e){console.warn("failed to load sdk module",e)}if(!e){let e;try{e=pluginRuntimeAPI}catch(e){}Object.assign(t.sdk,{log:deviceManager.getDeviceLogger(void 0),deviceManager,endpointManager,mediaManager,systemManager,pluginHostAPI,...e})}try{systemManager.setScryptedInterfaceDescriptors?.(i.TYPES_VERSION,i.ScryptedInterfaceDescriptors)?.catch((()=>{}))}catch(e){}}catch(e){console.error("sdk initialization error, import @scrypted/types or use @scrypted/client instead",e)}t.default=t.sdk},2673:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMixinDeviceBase=void 0;const s=i(r(7562)),{deviceManager:a}=s.default;class c extends s.MixinDeviceBase{constructor(e){super(e),this.settingsGroup=e.group,this.settingsGroupKey=e.groupKey,process.nextTick((()=>a.onMixinEvent(this.id,this,s.ScryptedInterface.Settings,null)))}async getSettings(){const e=this.mixinDeviceInterfaces.includes(s.ScryptedInterface.Settings)?this.mixinDevice.getSettings():void 0,t=this.getMixinSettings(),r=[];try{const t=await e||[];r.push(...t)}catch(e){const t=this.name,n=`${t} Extension settings failed to load.`;this.console.error(n,e),r.push({key:Math.random().toString(),title:t,value:"Settings Error",group:"Errors",description:n,readonly:!0})}try{const e=await t||[];for(const t of e)t.group=t.group||this.settingsGroup,t.key=this.settingsGroupKey+":"+t.key;r.push(...e)}catch(e){const t=a.getDeviceState(this.mixinProviderNativeId).name,n=`${t} Extension settings failed to load.`;this.console.error(n,e),r.push({key:Math.random().toString(),title:t,value:"Settings Error",group:"Errors",description:n,readonly:!0})}return r}async putSetting(e,t){const r=this.settingsGroupKey+":";if(!e?.startsWith(r))return this.mixinDevice.putSetting(e,t);await this.putMixinSetting(e.substring(r.length),t)||a.onMixinEvent(this.id,this,s.ScryptedInterface.Settings,null)}async release(){await a.onMixinEvent(this.id,this,s.ScryptedInterface.Settings,null)}}t.SettingsMixinDeviceBase=c},6117:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageSettings=void 0;const s=i(r(7562)),{systemManager:a}=s.default;t.StorageSettings=class{constructor(e,t){this.device=e,this.settings=t,this.values={},this.hasValue={};for(const e of Object.keys(t)){const r=t[e],n=()=>this.getItem(e);let o;o="clippath"!==r.type?n:()=>{try{return JSON.parse(n())}catch(e){}},Object.defineProperty(this.values,e,{get:o,set:t=>this.putSetting(e,t),enumerable:!0}),Object.defineProperty(this.hasValue,e,{get:()=>null!=this.device.storage.getItem(e),enumerable:!0})}}get keys(){const e={};for(const t of Object.keys(this.settings))e[t]=t;return e}async getSettings(){const e=await(this.options?.onGet?.()),t=[];for(const[r,n]of Object.entries(this.settings)){let o=Object.assign({},n);e?.[r]&&(o=Object.assign(o,e[r])),o.onGet&&(o=Object.assign(o,await o.onGet())),o.hide||await(this.options?.hide?.[r]?.())||(o.key=r,o.value=this.getItemInternal(r,o,!0),t.push(o),delete o.onPut,delete o.onGet,delete o.mapPut,delete o.mapGet)}return t}async putSetting(e,t){const r=this.settings[e];let n;return r&&(n=this.getItemInternal(e,r)),this.putSettingInternal(r,n,e,t)}putSettingInternal(e,t,r,n){e?.noStore||(e?.mapPut&&(n=e.mapPut(t,n)),null==n?this.device.storage.removeItem(r):"object"==typeof n?this.device.storage.setItem(r,JSON.stringify(n)):this.device.storage.setItem(r,n?.toString())),e?.onPut?.(t,n),e?.hide||this.device.onDeviceEvent(s.ScryptedInterface.Settings,void 0)}getItemInternal(e,t,r){if(!t)return this.device.storage.getItem(e);const n=function(e,t,r,n){if(null==e)return r();const o=t.multiple?"array":t.type;if("boolean"===o)return"true"===e||"false"!==e&&(r()||!1);if("number"===o){const t=parseFloat(e);return isNaN(t)?r()||0:t}if("integer"===o){const t=parseInt(e);return isNaN(t)?r()||0:t}if("array"===o){if(!e)return r()||[];try{return JSON.parse(e)}catch(e){return r()||[]}}if("device"===o)return n?e:a.getDeviceById(e)||a.getDeviceById(r());if(e&&t.json)try{return JSON.parse(e)}catch(e){return r()}return e||r()}(this.device.storage.getItem(e),t,(()=>null!=t.persistedDefaultValue?(this.putSettingInternal(t,void 0,e,t.persistedDefaultValue),t.persistedDefaultValue):t.defaultValue),r);return t.mapGet?t.mapGet(n):n}getItem(e){return this.getItemInternal(e,this.settings[e])}}},4192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.AirPurifierMode=t.AirPurifierStatus=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.3.91";var r,n,o,i,s,a,c,u,d,p,l,h,f,m,g,y,v,S;t.DeviceBase=class{},function(e){e.id="id",e.info="info",e.interfaces="interfaces",e.mixins="mixins",e.name="name",e.nativeId="nativeId",e.pluginId="pluginId",e.providedInterfaces="providedInterfaces",e.providedName="providedName",e.providedRoom="providedRoom",e.providedType="providedType",e.providerId="providerId",e.room="room",e.type="type",e.scryptedRuntimeArguments="scryptedRuntimeArguments",e.on="on",e.brightness="brightness",e.colorTemperature="colorTemperature",e.rgb="rgb",e.hsv="hsv",e.running="running",e.paused="paused",e.docked="docked",e.temperatureSetting="temperatureSetting",e.temperature="temperature",e.temperatureUnit="temperatureUnit",e.humidity="humidity",e.audioVolumes="audioVolumes",e.recordingActive="recordingActive",e.ptzCapabilities="ptzCapabilities",e.lockState="lockState",e.entryOpen="entryOpen",e.batteryLevel="batteryLevel",e.chargeState="chargeState",e.online="online",e.fromMimeType="fromMimeType",e.toMimeType="toMimeType",e.converters="converters",e.binaryState="binaryState",e.tampered="tampered",e.powerDetected="powerDetected",e.audioDetected="audioDetected",e.motionDetected="motionDetected",e.ambientLight="ambientLight",e.occupied="occupied",e.flooded="flooded",e.ultraviolet="ultraviolet",e.luminance="luminance",e.position="position",e.securitySystemState="securitySystemState",e.pm10Density="pm10Density",e.pm25Density="pm25Density",e.vocDensity="vocDensity",e.noxDensity="noxDensity",e.co2ppm="co2ppm",e.airQuality="airQuality",e.airPurifierState="airPurifierState",e.filterChangeIndication="filterChangeIndication",e.filterLifeLevel="filterLifeLevel",e.humiditySetting="humiditySetting",e.fan="fan",e.applicationInfo="applicationInfo",e.systemDevice="systemDevice"}(r||(t.ScryptedInterfaceProperty=r={})),function(e){e.listen="listen",e.probe="probe",e.setMixins="setMixins",e.setName="setName",e.setRoom="setRoom",e.setType="setType",e.getPluginJson="getPluginJson",e.turnOff="turnOff",e.turnOn="turnOn",e.setBrightness="setBrightness",e.getTemperatureMaxK="getTemperatureMaxK",e.getTemperatureMinK="getTemperatureMinK",e.setColorTemperature="setColorTemperature",e.setRgb="setRgb",e.setHsv="setHsv",e.sendNotification="sendNotification",e.start="start",e.stop="stop",e.pause="pause",e.resume="resume",e.dock="dock",e.setTemperature="setTemperature",e.setTemperatureUnit="setTemperatureUnit",e.getPictureOptions="getPictureOptions",e.takePicture="takePicture",e.getAudioStream="getAudioStream",e.setAudioVolumes="setAudioVolumes",e.startDisplay="startDisplay",e.stopDisplay="stopDisplay",e.getVideoStream="getVideoStream",e.getVideoStreamOptions="getVideoStreamOptions",e.getPrivacyMasks="getPrivacyMasks",e.setPrivacyMasks="setPrivacyMasks",e.getRecordingStream="getRecordingStream",e.getRecordingStreamCurrentTime="getRecordingStreamCurrentTime",e.getRecordingStreamOptions="getRecordingStreamOptions",e.getRecordingStreamThumbnail="getRecordingStreamThumbnail",e.deleteRecordingStream="deleteRecordingStream",e.setRecordingActive="setRecordingActive",e.ptzCommand="ptzCommand",e.getRecordedEvents="getRecordedEvents",e.getVideoClip="getVideoClip",e.getVideoClips="getVideoClips",e.getVideoClipThumbnail="getVideoClipThumbnail",e.removeVideoClips="removeVideoClips",e.setVideoStreamOptions="setVideoStreamOptions",e.startIntercom="startIntercom",e.stopIntercom="stopIntercom",e.lock="lock",e.unlock="unlock",e.addPassword="addPassword",e.getPasswords="getPasswords",e.removePassword="removePassword",e.activate="activate",e.deactivate="deactivate",e.isReversible="isReversible",e.closeEntry="closeEntry",e.openEntry="openEntry",e.getDevice="getDevice",e.releaseDevice="releaseDevice",e.adoptDevice="adoptDevice",e.discoverDevices="discoverDevices",e.createDevice="createDevice",e.getCreateDeviceSettings="getCreateDeviceSettings",e.reboot="reboot",e.getRefreshFrequency="getRefreshFrequency",e.refresh="refresh",e.getMediaStatus="getMediaStatus",e.load="load",e.seek="seek",e.skipNext="skipNext",e.skipPrevious="skipPrevious",e.convert="convert",e.convertMedia="convertMedia",e.getSettings="getSettings",e.putSetting="putSetting",e.armSecuritySystem="armSecuritySystem",e.disarmSecuritySystem="disarmSecuritySystem",e.setAirPurifierState="setAirPurifierState",e.getReadmeMarkdown="getReadmeMarkdown",e.getOauthUrl="getOauthUrl",e.onOauthCallback="onOauthCallback",e.canMixin="canMixin",e.getMixin="getMixin",e.releaseMixin="releaseMixin",e.onRequest="onRequest",e.onConnection="onConnection",e.onPush="onPush",e.run="run",e.eval="eval",e.loadScripts="loadScripts",e.saveScript="saveScript",e.forkInterface="forkInterface",e.trackObjects="trackObjects",e.getDetectionInput="getDetectionInput",e.getObjectTypes="getObjectTypes",e.detectObjects="detectObjects",e.generateObjectDetections="generateObjectDetections",e.getDetectionModel="getDetectionModel",e.setHumidity="setHumidity",e.setFan="setFan",e.startRTCSignalingSession="startRTCSignalingSession",e.createRTCSignalingSession="createRTCSignalingSession",e.getScryptedUserAccessControl="getScryptedUserAccessControl",e.generateVideoFrames="generateVideoFrames",e.connectStream="connectStream",e.getTTYSettings="getTTYSettings"}(n||(t.ScryptedInterfaceMethod=n={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},ScryptedPluginRuntime:{name:"ScryptedPluginRuntime",methods:[],properties:["scryptedRuntimeArguments"]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature"],properties:["temperatureSetting"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},AudioVolumeControl:{name:"AudioVolumeControl",methods:["setAudioVolumes"],properties:["audioVolumes"]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoCameraMask:{name:"VideoCameraMask",methods:["getPrivacyMasks","setPrivacyMasks"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:["recordingActive"]},VideoRecorderManagement:{name:"VideoRecorderManagement",methods:["deleteRecordingStream","setRecordingActive"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClips","getVideoClipThumbnail","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Reboot:{name:"Reboot",methods:["reboot"],properties:[]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},MediaConverter:{name:"MediaConverter",methods:["convertMedia"],properties:["converters"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},AirPurifier:{name:"AirPurifier",methods:["setAirPurifierState"],properties:["airPurifierState"]},FilterMaintenance:{name:"FilterMaintenance",methods:[],properties:["filterChangeIndication","filterLifeLevel"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ClusterForkInterface:{name:"ClusterForkInterface",methods:["forkInterface"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},ObjectDetectionPreview:{name:"ObjectDetectionPreview",methods:[],properties:[]},ObjectDetectionGenerator:{name:"ObjectDetectionGenerator",methods:[],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]},StreamService:{name:"StreamService",methods:["connectStream"],properties:[]},TTY:{name:"TTY",methods:[],properties:[]},TTYSettings:{name:"TTYSettings",methods:["getTTYSettings"],properties:[]},ScryptedSystemDevice:{name:"ScryptedSystemDevice",methods:[],properties:["systemDevice"]},ScryptedDeviceCreator:{name:"ScryptedDeviceCreator",methods:[],properties:[]},ScryptedSettings:{name:"ScryptedSettings",methods:[],properties:[]}},function(e){e.Builtin="Builtin",e.Camera="Camera",e.Fan="Fan",e.Light="Light",e.Switch="Switch",e.Outlet="Outlet",e.Sensor="Sensor",e.Scene="Scene",e.Program="Program",e.Automation="Automation",e.Vacuum="Vacuum",e.Notifier="Notifier",e.Thermostat="Thermostat",e.Lock="Lock",e.PasswordControl="PasswordControl",e.Display="Display",e.SmartDisplay="SmartDisplay",e.Speaker="Speaker",e.SmartSpeaker="SmartSpeaker",e.Event="Event",e.Entry="Entry",e.Garage="Garage",e.DeviceProvider="DeviceProvider",e.DataSource="DataSource",e.API="API",e.Doorbell="Doorbell",e.Irrigation="Irrigation",e.Valve="Valve",e.Person="Person",e.SecuritySystem="SecuritySystem",e.WindowCovering="WindowCovering",e.Siren="Siren",e.AirPurifier="AirPurifier",e.Unknown="Unknown"}(o||(t.ScryptedDeviceType=o={})),function(e){e.Humidify="Humidify",e.Dehumidify="Dehumidify",e.Auto="Auto",e.Off="Off"}(i||(t.HumidityMode=i={})),function(e){e.Auto="Auto",e.Manual="Manual"}(s||(t.FanMode=s={})),function(e){e.C="C",e.F="F"}(a||(t.TemperatureUnit=a={})),function(e){e.Off="Off",e.Cool="Cool",e.Heat="Heat",e.HeatCool="HeatCool",e.Auto="Auto",e.FanOnly="FanOnly",e.Purifier="Purifier",e.Eco="Eco",e.Dry="Dry",e.On="On"}(c||(t.ThermostatMode=c={})),function(e){e.Absolute="Absolute",e.Relative="Relative",e.Continuous="Continuous",e.Preset="Preset",e.Home="Home"}(u||(t.PanTiltZoomMovement=u={})),function(e){e.Locked="Locked",e.Unlocked="Unlocked",e.Jammed="Jammed"}(d||(t.LockState=d={})),function(e){e.Trickle="trickle",e.Charging="charging",e.NotCharging="not-charging"}(p||(t.ChargeState=p={})),function(e){e.Inactive="Inactive",e.Idle="Idle",e.Active="Active",e.ActiveNightMode="ActiveNightMode"}(l||(t.AirPurifierStatus=l={})),function(e){e.Manual="Manual",e.Automatic="Automatic"}(h||(t.AirPurifierMode=h={})),function(e){e.Unknown="Unknown",e.Excellent="Excellent",e.Good="Good",e.Fair="Fair",e.Inferior="Inferior",e.Poor="Poor"}(f||(t.AirQuality=f={})),function(e){e.Disarmed="Disarmed",e.HomeArmed="HomeArmed",e.AwayArmed="AwayArmed",e.NightArmed="NightArmed"}(m||(t.SecuritySystemMode=m={})),function(e){e.Sensor="Sensor",e.Occupied="Occupied",e.Time="Time",e.Error="Error"}(g||(t.SecuritySystemObstruction=g={})),function(e){e.Idle="Idle",e.Playing="Playing",e.Paused="Paused",e.Buffering="Buffering"}(y||(t.MediaPlayerState=y={})),function(e){e.ScryptedDevice="ScryptedDevice",e.ScryptedPlugin="ScryptedPlugin",e.ScryptedPluginRuntime="ScryptedPluginRuntime",e.OnOff="OnOff",e.Brightness="Brightness",e.ColorSettingTemperature="ColorSettingTemperature",e.ColorSettingRgb="ColorSettingRgb",e.ColorSettingHsv="ColorSettingHsv",e.Notifier="Notifier",e.StartStop="StartStop",e.Pause="Pause",e.Dock="Dock",e.TemperatureSetting="TemperatureSetting",e.Thermometer="Thermometer",e.HumiditySensor="HumiditySensor",e.Camera="Camera",e.Microphone="Microphone",e.AudioVolumeControl="AudioVolumeControl",e.Display="Display",e.VideoCamera="VideoCamera",e.VideoCameraMask="VideoCameraMask",e.VideoRecorder="VideoRecorder",e.VideoRecorderManagement="VideoRecorderManagement",e.PanTiltZoom="PanTiltZoom",e.EventRecorder="EventRecorder",e.VideoClips="VideoClips",e.VideoCameraConfiguration="VideoCameraConfiguration",e.Intercom="Intercom",e.Lock="Lock",e.PasswordStore="PasswordStore",e.Scene="Scene",e.Entry="Entry",e.EntrySensor="EntrySensor",e.DeviceProvider="DeviceProvider",e.DeviceDiscovery="DeviceDiscovery",e.DeviceCreator="DeviceCreator",e.Battery="Battery",e.Charger="Charger",e.Reboot="Reboot",e.Refresh="Refresh",e.MediaPlayer="MediaPlayer",e.Online="Online",e.BufferConverter="BufferConverter",e.MediaConverter="MediaConverter",e.Settings="Settings",e.BinarySensor="BinarySensor",e.TamperSensor="TamperSensor",e.PowerSensor="PowerSensor",e.AudioSensor="AudioSensor",e.MotionSensor="MotionSensor",e.AmbientLightSensor="AmbientLightSensor",e.OccupancySensor="OccupancySensor",e.FloodSensor="FloodSensor",e.UltravioletSensor="UltravioletSensor",e.LuminanceSensor="LuminanceSensor",e.PositionSensor="PositionSensor",e.SecuritySystem="SecuritySystem",e.PM10Sensor="PM10Sensor",e.PM25Sensor="PM25Sensor",e.VOCSensor="VOCSensor",e.NOXSensor="NOXSensor",e.CO2Sensor="CO2Sensor",e.AirQualitySensor="AirQualitySensor",e.AirPurifier="AirPurifier",e.FilterMaintenance="FilterMaintenance",e.Readme="Readme",e.OauthClient="OauthClient",e.MixinProvider="MixinProvider",e.HttpRequestHandler="HttpRequestHandler",e.EngineIOHandler="EngineIOHandler",e.PushHandler="PushHandler",e.Program="Program",e.Scriptable="Scriptable",e.ClusterForkInterface="ClusterForkInterface",e.ObjectTracker="ObjectTracker",e.ObjectDetector="ObjectDetector",e.ObjectDetection="ObjectDetection",e.ObjectDetectionPreview="ObjectDetectionPreview",e.ObjectDetectionGenerator="ObjectDetectionGenerator",e.HumiditySetting="HumiditySetting",e.Fan="Fan",e.RTCSignalingChannel="RTCSignalingChannel",e.RTCSignalingClient="RTCSignalingClient",e.LauncherApplication="LauncherApplication",e.ScryptedUser="ScryptedUser",e.VideoFrameGenerator="VideoFrameGenerator",e.StreamService="StreamService",e.TTY="TTY",e.TTYSettings="TTYSettings",e.ScryptedSystemDevice="ScryptedSystemDevice",e.ScryptedDeviceCreator="ScryptedDeviceCreator",e.ScryptedSettings="ScryptedSettings"}(v||(t.ScryptedInterface=v={})),function(e){e.Url="text/x-uri",e.InsecureLocalUrl="text/x-insecure-local-uri",e.LocalUrl="text/x-local-uri",e.ServerId="text/x-server-id",e.PushEndpoint="text/x-push-endpoint",e.SchemePrefix="x-scrypted/x-scrypted-scheme-",e.MediaStreamUrl="text/x-media-url",e.MediaObject="x-scrypted/x-scrypted-media-object",e.RequestMediaObject="x-scrypted/x-scrypted-request-media-object",e.RequestMediaStream="x-scrypted/x-scrypted-request-stream",e.MediaStreamFeedback="x-scrypted/x-media-stream-feedback",e.FFmpegInput="x-scrypted/x-ffmpeg-input",e.FFmpegTranscodeStream="x-scrypted/x-ffmpeg-transcode-stream",e.RTCSignalingChannel="x-scrypted/x-scrypted-rtc-signaling-channel",e.RTCSignalingSession="x-scrypted/x-scrypted-rtc-signaling-session",e.RTCConnectionManagement="x-scrypted/x-scrypted-rtc-connection-management",e.Image="x-scrypted/x-scrypted-image"}(S||(t.ScryptedMimeTypes=S={}))},5580:(e,t,r)=>{var n=r(6110)(r(9325),"DataView");e.exports=n},1549:(e,t,r)=>{var n=r(2032),o=r(3862),i=r(6721),s=r(2749),a=r(5749);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},79:(e,t,r)=>{var n=r(3702),o=r(80),i=r(4739),s=r(8655),a=r(1175);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},8223:(e,t,r)=>{var n=r(6110)(r(9325),"Map");e.exports=n},3661:(e,t,r)=>{var n=r(3040),o=r(7670),i=r(289),s=r(4509),a=r(2949);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},2804:(e,t,r)=>{var n=r(6110)(r(9325),"Promise");e.exports=n},6545:(e,t,r)=>{var n=r(6110)(r(9325),"Set");e.exports=n},8859:(e,t,r)=>{var n=r(3661),o=r(1380),i=r(1459);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,e.exports=s},7217:(e,t,r)=>{var n=r(79),o=r(1420),i=r(938),s=r(3605),a=r(9817),c=r(945);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,e.exports=u},1873:(e,t,r)=>{var n=r(9325).Symbol;e.exports=n},7828:(e,t,r)=>{var n=r(9325).Uint8Array;e.exports=n},8303:(e,t,r)=>{var n=r(6110)(r(9325),"WeakMap");e.exports=n},3945:e=>{e.exports=function(e,t,r,n){for(var o=-1,i=null==e?0:e.length;++o<i;){var s=e[o];t(n,s,r(s),e)}return n}},9770:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}},695:(e,t,r)=>{var n=r(8096),o=r(2428),i=r(6449),s=r(3656),a=r(361),c=r(7167),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),d=!r&&o(e),p=!r&&!d&&s(e),l=!r&&!d&&!p&&c(e),h=r||d||p||l,f=h?n(e.length,String):[],m=f.length;for(var g in e)!t&&!u.call(e,g)||h&&("length"==g||p&&("offset"==g||"parent"==g)||l&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}},4932:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},4528:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},4248:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},6025:(e,t,r)=>{var n=r(5288);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},2429:(e,t,r)=>{var n=r(909);e.exports=function(e,t,r,o){return n(e,(function(e,n,i){t(o,e,r(e),i)})),o}},3360:(e,t,r)=>{var n=r(3243);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},909:(e,t,r)=>{var n=r(641),o=r(8329)(n);e.exports=o},6649:(e,t,r)=>{var n=r(3221)();e.exports=n},641:(e,t,r)=>{var n=r(6649),o=r(5950);e.exports=function(e,t){return e&&n(e,t,o)}},7422:(e,t,r)=>{var n=r(1769),o=r(7797);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},2199:(e,t,r)=>{var n=r(4528),o=r(6449);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},2552:(e,t,r)=>{var n=r(1873),o=r(659),i=r(9350),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):i(e)}},8077:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7534:(e,t,r)=>{var n=r(2552),o=r(346);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},270:(e,t,r)=>{var n=r(7068),o=r(346);e.exports=function e(t,r,i,s,a){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,i,s,e,a))}},7068:(e,t,r)=>{var n=r(7217),o=r(5911),i=r(1986),s=r(689),a=r(5861),c=r(6449),u=r(3656),d=r(7167),p="[object Arguments]",l="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,m,g,y){var v=c(e),S=c(t),b=v?l:a(e),_=S?l:a(t),C=(b=b==p?h:b)==h,w=(_=_==p?h:_)==h,x=b==_;if(x&&u(e)){if(!u(t))return!1;v=!0,C=!1}if(x&&!C)return y||(y=new n),v||d(e)?o(e,t,r,m,g,y):i(e,t,b,r,m,g,y);if(!(1&r)){var O=C&&f.call(e,"__wrapped__"),D=w&&f.call(t,"__wrapped__");if(O||D){var P=O?e.value():e,j=D?t.value():t;return y||(y=new n),g(P,j,r,m,y)}}return!!x&&(y||(y=new n),s(e,t,r,m,g,y))}},1799:(e,t,r)=>{var n=r(7217),o=r(270);e.exports=function(e,t,r,i){var s=r.length,a=s,c=!i;if(null==e)return!a;for(e=Object(e);s--;){var u=r[s];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<a;){var d=(u=r[s])[0],p=e[d],l=u[1];if(c&&u[2]){if(void 0===p&&!(d in e))return!1}else{var h=new n;if(i)var f=i(p,l,d,e,t,h);if(!(void 0===f?o(l,p,3,i,h):f))return!1}}return!0}},5083:(e,t,r)=>{var n=r(1882),o=r(7296),i=r(3805),s=r(7473),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,p=u.hasOwnProperty,l=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?l:a).test(s(e))}},4901:(e,t,r)=>{var n=r(2552),o=r(294),i=r(346),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!s[n(e)]}},5389:(e,t,r)=>{var n=r(3663),o=r(7978),i=r(3488),s=r(6449),a=r(583);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):n(e):a(e)}},8984:(e,t,r)=>{var n=r(5527),o=r(3650),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3663:(e,t,r)=>{var n=r(1799),o=r(776),i=r(7197);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},7978:(e,t,r)=>{var n=r(270),o=r(8156),i=r(631),s=r(8586),a=r(756),c=r(7197),u=r(7797);e.exports=function(e,t){return s(e)&&a(t)?c(u(e),t):function(r){var s=o(r,e);return void 0===s&&s===t?i(r,e):n(t,s,3)}}},7237:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7255:(e,t,r)=>{var n=r(7422);e.exports=function(e){return function(t){return n(t,e)}}},8096:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},7556:(e,t,r)=>{var n=r(1873),o=r(4932),i=r(6449),s=r(4394),a=n?n.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},9219:e=>{e.exports=function(e,t){return e.has(t)}},1769:(e,t,r)=>{var n=r(6449),o=r(8586),i=r(1802),s=r(3222);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(s(e))}},5481:(e,t,r)=>{var n=r(9325)["__core-js_shared__"];e.exports=n},2e3:(e,t,r)=>{var n=r(3945),o=r(2429),i=r(5389),s=r(6449);e.exports=function(e,t){return function(r,a){var c=s(r)?n:o,u=t?t():{};return c(r,e,i(a,2),u)}}},8329:(e,t,r)=>{var n=r(4894);e.exports=function(e,t){return function(r,o){if(null==r)return r;if(!n(r))return e(r,o);for(var i=r.length,s=t?i:-1,a=Object(r);(t?s--:++s<i)&&!1!==o(a[s],s,a););return r}}},3221:e=>{e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===r(i[c],c,i))break}return t}}},3243:(e,t,r)=>{var n=r(6110),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},5911:(e,t,r)=>{var n=r(8859),o=r(4248),i=r(9219);e.exports=function(e,t,r,s,a,c){var u=1&r,d=e.length,p=t.length;if(d!=p&&!(u&&p>d))return!1;var l=c.get(e),h=c.get(t);if(l&&h)return l==t&&h==e;var f=-1,m=!0,g=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++f<d;){var y=e[f],v=t[f];if(s)var S=u?s(v,y,f,t,e,c):s(y,v,f,e,t,c);if(void 0!==S){if(S)continue;m=!1;break}if(g){if(!o(t,(function(e,t){if(!i(g,t)&&(y===e||a(y,e,r,s,c)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!a(y,v,r,s,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},1986:(e,t,r)=>{var n=r(1873),o=r(7828),i=r(5288),s=r(5911),a=r(317),c=r(4247),u=n?n.prototype:void 0,d=u?u.valueOf:void 0;e.exports=function(e,t,r,n,u,p,l){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var f=1&n;if(h||(h=c),e.size!=t.size&&!f)return!1;var m=l.get(e);if(m)return m==t;n|=2,l.set(e,t);var g=s(h(e),h(t),n,u,p,l);return l.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},689:(e,t,r)=>{var n=r(2),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,i,s,a){var c=1&r,u=n(e),d=u.length;if(d!=n(t).length&&!c)return!1;for(var p=d;p--;){var l=u[p];if(!(c?l in t:o.call(t,l)))return!1}var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=c;++p<d;){var y=e[l=u[p]],v=t[l];if(i)var S=c?i(v,y,l,t,e,a):i(y,v,l,e,t,a);if(!(void 0===S?y===v||s(y,v,r,i,a):S)){m=!1;break}g||(g="constructor"==l)}if(m&&!g){var b=e.constructor,_=t.constructor;b==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(t),m}},4840:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},2:(e,t,r)=>{var n=r(2199),o=r(4664),i=r(5950);e.exports=function(e){return n(e,i,o)}},2651:(e,t,r)=>{var n=r(4218);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},776:(e,t,r)=>{var n=r(756),o=r(5950);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],s=e[i];t[r]=[i,s,n(s)]}return t}},6110:(e,t,r)=>{var n=r(5083),o=r(392);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},659:(e,t,r)=>{var n=r(1873),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[a]=r:delete e[a]),o}},4664:(e,t,r)=>{var n=r(9770),o=r(3345),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),n(s(e),(function(t){return i.call(e,t)})))}:o;e.exports=a},5861:(e,t,r)=>{var n=r(5580),o=r(8223),i=r(2804),s=r(6545),a=r(8303),c=r(2552),u=r(7473),d="[object Map]",p="[object Promise]",l="[object Set]",h="[object WeakMap]",f="[object DataView]",m=u(n),g=u(o),y=u(i),v=u(s),S=u(a),b=c;(n&&b(new n(new ArrayBuffer(1)))!=f||o&&b(new o)!=d||i&&b(i.resolve())!=p||s&&b(new s)!=l||a&&b(new a)!=h)&&(b=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case m:return f;case g:return d;case y:return p;case v:return l;case S:return h}return t}),e.exports=b},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9326:(e,t,r)=>{var n=r(1769),o=r(2428),i=r(6449),s=r(361),a=r(294),c=r(7797);e.exports=function(e,t,r){for(var u=-1,d=(t=n(t,e)).length,p=!1;++u<d;){var l=c(t[u]);if(!(p=null!=e&&r(e,l)))break;e=e[l]}return p||++u!=d?p:!!(d=null==e?0:e.length)&&a(d)&&s(l,d)&&(i(e)||o(e))}},2032:(e,t,r)=>{var n=r(1042);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6721:(e,t,r)=>{var n=r(1042),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},2749:(e,t,r)=>{var n=r(1042),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},5749:(e,t,r)=>{var n=r(1042);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},8586:(e,t,r)=>{var n=r(6449),o=r(4394),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7296:(e,t,r)=>{var n,o=r(5481),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},5527:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},756:(e,t,r)=>{var n=r(3805);e.exports=function(e){return e==e&&!n(e)}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},80:(e,t,r)=>{var n=r(6025),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():o.call(t,r,1),--this.size,!0)}},4739:(e,t,r)=>{var n=r(6025);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},8655:(e,t,r)=>{var n=r(6025);e.exports=function(e){return n(this.__data__,e)>-1}},1175:(e,t,r)=>{var n=r(6025);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},3040:(e,t,r)=>{var n=r(1549),o=r(79),i=r(8223);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},7670:(e,t,r)=>{var n=r(2651);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},289:(e,t,r)=>{var n=r(2651);e.exports=function(e){return n(this,e).get(e)}},4509:(e,t,r)=>{var n=r(2651);e.exports=function(e){return n(this,e).has(e)}},2949:(e,t,r)=>{var n=r(2651);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},317:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},7197:e=>{e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},2224:(e,t,r)=>{var n=r(104);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},1042:(e,t,r)=>{var n=r(6110)(Object,"create");e.exports=n},3650:(e,t,r)=>{var n=r(4335)(Object.keys,Object);e.exports=n},6009:(e,t,r)=>{e=r.nmd(e);var n=r(4840),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4335:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},9325:(e,t,r)=>{var n=r(4840),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},4247:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},1420:(e,t,r)=>{var n=r(79);e.exports=function(){this.__data__=new n,this.size=0}},938:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},945:(e,t,r)=>{var n=r(79),o=r(8223),i=r(3661);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(s)}return r.set(e,t),this.size=r.size,this}},1802:(e,t,r)=>{var n=r(2224),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)})),t}));e.exports=s},7797:(e,t,r)=>{var n=r(4394);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},8156:(e,t,r)=>{var n=r(7422);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},631:(e,t,r)=>{var n=r(8077),o=r(9326);e.exports=function(e,t){return null!=e&&o(e,t,n)}},3488:e=>{e.exports=function(e){return e}},2428:(e,t,r)=>{var n=r(7534),o=r(346),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},6449:e=>{var t=Array.isArray;e.exports=t},4894:(e,t,r)=>{var n=r(1882),o=r(294);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},3656:(e,t,r)=>{e=r.nmd(e);var n=r(9325),o=r(9935),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,a=s&&s.exports===i?n.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;e.exports=c},1882:(e,t,r)=>{var n=r(2552),o=r(3805);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4394:(e,t,r)=>{var n=r(2552),o=r(346);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},7167:(e,t,r)=>{var n=r(4901),o=r(7301),i=r(6009),s=i&&i.isTypedArray,a=s?o(s):n;e.exports=a},8970:(e,t,r)=>{var n=r(3360),o=r(2e3)((function(e,t,r){n(e,r,t)}));e.exports=o},5950:(e,t,r)=>{var n=r(695),o=r(8984),i=r(4894);e.exports=function(e){return i(e)?n(e):o(e)}},104:(e,t,r)=>{var n=r(3661);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},583:(e,t,r)=>{var n=r(7237),o=r(7255),i=r(8586),s=r(7797);e.exports=function(e){return i(e)?n(s(e)):o(e)}},3345:e=>{e.exports=function(){return[]}},9935:e=>{e.exports=function(){return!1}},3222:(e,t,r)=>{var n=r(7556);e.exports=function(e){return null==e?"":n(e)}},2112:function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&o(t,e,r[s]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=s(r(7562)),u=r(2673),d=r(6117),p=a(r(8970)),l=r(3985),h=r(6185),f=a(r(9896)),m=a(r(6928)),{endpointManager:g}=c.default,y=new RegExp("(.{4})(.{2})(.{2})(.{2})(.{2})(.{2})");class v extends u.SettingsMixinDeviceBase{constructor(e,t){super(e),this.plugin=t,this.ftpScanData=[],this.storageSettings=new d.StorageSettings(this,{username:{title:"Username",type:"string"},password:{title:"Password",type:"password"},loginParams:{hide:!0,type:"string",json:!0},forceSnapshotMinutes:{title:"Force snapshot in minutes",description:"Force a snapshot on regular interval if the camera did not get events for a long time",defaultValue:60,type:"number"},ftp:{title:"Fetch from FTP folder",type:"boolean",immediate:!0,onPut:async()=>this.checkFtpScan()},ftpFolder:{title:"FTP folder",description:"FTP folder where reolink stores the clips",type:"string",onPut:async()=>this.checkFtpScan()},filenamePrefix:{title:"Filename prefix",description:"Prefix to filter out the camera videoclips stored on the FTP server",type:"string",onPut:async()=>this.checkFtpScan()}}),this.plugin.mixinsMap[this.id]=this,this.checkBatteryStuff().catch(this.console.log),this.checkFtpScan().catch(this.console.log)}async release(){this.stopBatteryCheckInterval(),this.killed=!0}async checkFtpScan(){const{ftp:e,ftpFolder:t}=this.storageSettings.values;e&&t?this.startFtpScan():this.stopFtpScan()}stopFtpScan(){this.ftpScanTimeout&&clearInterval(this.ftpScanTimeout),this.ftpScanTimeout=void 0}startFtpScan(){const{ftpFolder:e,filenamePrefix:t}=this.storageSettings.values;this.stopFtpScan();const r=(e,n=[])=>{const o=[...n],i=f.default.readdirSync(e);for(const n of i){const i=m.default.join(e,n),s=f.default.statSync(i);if(s.isDirectory())o.push(...r(i,o));else{const[e,r]=n.split(t),[a,c,u,d,p,l,h]=y.exec(r);o.push({filename:n,fullPath:i,time:{day:Number(d),hour:Number(p),min:Number(l),mon:Number(u),sec:Number(h),year:Number(c)},type:n.endsWith("mp4")?"video":"image",size:s.size})}}return o};this.ftpScanTimeout=setInterval((async()=>{try{this.ftpScanData=r(e)}catch(e){this.console.log("Error in getting battery info",e)}}),1e4)}async checkBatteryStuff(){this.isBattery()?this.startBatteryCheckInterval():this.stopBatteryCheckInterval()}stopBatteryCheckInterval(){this.batteryTimeout&&clearInterval(this.batteryTimeout),this.batteryTimeout=void 0}startBatteryCheckInterval(){this.stopBatteryCheckInterval(),this.batteryTimeout=setInterval((async()=>{const e=await this.getClient();try{const{sleep:t}=await e.getBatteryInfo();!1===t&&(this.console.log("Camera is not sleeping, snapping"),this.lastSnapshot=this.createMediaObject(await e.jpegSnapshot(),"image/jpeg"),this.lastSnapshotTaken=Date.now())}catch(e){this.console.log("Error in getting battery info",e)}}),1e4)}async getDeviceProperties(){const e=await this.mixinDevice.getSettings(),t=(0,p.default)(e,(e=>e.key)),r=t.username?.value,n=t.password?.value,o=t.ip?.value,i=t.rtspChannel?.value;return{username:r,password:n,host:o,channel:i}}async getClient(){if(!this.client){const{channel:e,host:t,username:r,password:n}=await this.getDeviceProperties(),{username:o,password:i,loginParams:s}=this.storageSettings.values;this.client=new l.ReolinkCameraClient(t,o||r,i||n,e,this.console,(e=>this.storageSettings.values.loginParams=e),s,!0)}return this.client}async updateSnapshot(){this.storage.setItem("snapshot:snapshotUrl","Test url")}async getVideoclipWebhookUrls(e){const t=await g.getCloudEndpoint(void 0,{public:!0}),[r,n]=t.split("?")??"",o={deviceId:this.id,videoclipPath:e};return{videoclipUrl:`${r}videoclip?params=${JSON.stringify(o)}&${n}`,thumbnailUrl:`${r}thumbnail?params=${JSON.stringify(o)}&${n}`}}processDate(e){let t=new Date;return t.setFullYear(e.year),t.setMonth(e.mon-1),t.setDate(e.day),t.setHours(e.hour),t.setMinutes(e.min),t.setSeconds(e.sec),t.getTime()}async getVideoClips(e,t="main"){try{const{ftp:t}=this.storageSettings.values,r=[];if(t){for(const t of this.ftpScanData){const n=this.processDate(t.time);if("video"===t.type&&n>=e.startTime&&n<=e.endTime){const e=t.fullPath,o="motion",{thumbnailUrl:i,videoclipUrl:s}=await this.getVideoclipWebhookUrls(e);r.push({id:e,startTime:n,videoId:e,thumbnailId:e,detectionClasses:[o],event:o,description:o,resources:{thumbnail:{href:i},video:{href:s}}})}}this.console.log("Videoclips found:",r)}else{const t=await this.getClient(),n=(0,h.splitDateRangeByDay)(e.startTime,e.endTime);let o=[];for(const e of n){const r=await t.getVideoClips({startTime:e.start,endTime:e.end});o.push(...r)}this.console.log("Videoclips found:",o,n,t.parameters.token);for(const e of o)try{const t=this.processDate(e.StartTime),n=this.processDate(e.EndTime)-t,o=e.name,{detectionClasses:i}=(0,h.parseVideoclipName)(o),s="motion",{thumbnailUrl:a,videoclipUrl:c}=await this.getVideoclipWebhookUrls(o);r.push({id:o,startTime:t,duration:Math.round(n),videoId:o,thumbnailId:o,detectionClasses:i,event:s,description:s,resources:{thumbnail:{href:a},video:{href:c}}})}catch(e){this.console.log("error generating clip",e)}}return r}catch(e){this.console.log("Error during get videoClips",e)}}async getVideoclipParams(e){const{ftp:t}=this.storageSettings.values,{thumbnailFolder:r}=(0,h.getFolderPaths)(this.id,this.plugin.storageSettings.values.downloadFolder),n=`${e.split("/").pop().split(".")[0]}`;let o;if(t)o=e;else{const t=await this.getClient(),{playbackPathWithHost:r}=await t.getVideoClipUrl(e,this.id);o=r}return{videoclipUrl:o,filename:n,thumbnailFolder:r}}async getVideoClip(e){this.console.log("Fetching videoId ",e);const{videoclipUrl:t}=await this.getVideoclipWebhookUrls(e);return await c.default.mediaManager.createMediaObject(t,"video/mp4")}async getVideoClipThumbnail(e,t){this.console.log("Fetching thumbnailId ",e);const{filename:r,videoclipUrl:n,thumbnailFolder:o}=await this.getVideoclipParams(e),{thumbnailMo:i}=await(0,h.getThumbnailMediaObject)({filename:r,thumbnailFolder:o,videoclipUrl:n,console:this.console});return i}removeVideoClips(...e){throw new Error("Method not implemented.")}async getMixinSettings(){this.storageSettings.settings.filenamePrefix.hide=!this.storageSettings.values.ftp,this.storageSettings.settings.ftpFolder.hide=!this.storageSettings.values.ftp,this.storageSettings.settings.forceSnapshotMinutes.hide=!this.isBattery();return await this.storageSettings.getSettings()}async putMixinSetting(e,t){this.storage.setItem(e,"string"==typeof t?t:JSON.stringify(t))}isBattery(){return this.interfaces.includes(c.ScryptedInterface.Battery)}async takeSmartCameraPicture(e){const t=await this.getClient();return this.isBattery()?((!this.lastSnapshotTaken||Date.now()-this.lastSnapshotTaken>=6e4*(this.storageSettings.values.forceSnapshotMinutes??60))&&(this.console.log("Waking up the camera to force a snapshot"),await t.getWhiteLed()),this.lastSnapshot):this.createMediaObject(await t.jpegSnapshot(e?.timeout),"image/jpeg")}async takePicture(e){return this.takeSmartCameraPicture(e)}async getPictureOptions(){}}t.default=v},3985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReolinkCameraClient=void 0;const n=r(6125),o=r(2203),i=r(145);t.ReolinkCameraClient=class{constructor(e,t,r,n,i,s,a,c){this.host=e,this.username=t,this.password=r,this.channelId=n,this.console=i,this.onTokenRefresh=s,this.forceToken=c,this.loggingIn=!1,this.createReadable=e=>{const t=new o.PassThrough;return t.write(Buffer.from(JSON.stringify(e))),t.end(),t},this.credential={username:t,password:r},a&&(this.parameters=a.parameters,this.tokenLease=a.tokenLease),this.refreshTokenInterval=setInterval((async()=>this.refreshSession()),3e5),this.refreshSession().catch(this.console.log)}async refreshSession(){try{await this.logout(),await this.login()}catch(e){this.console.log("Error in refreshSession",e)}}async request(e,t){return await(0,n.authHttpFetch)({...e,rejectUnauthorized:!1,credential:this.credential,body:t})}async logout(){const e=new URL(`http://${this.host}/api.cgi`);e.searchParams.set("cmd","Logout"),await this.requestWithLogin({url:e,responseType:"json"}),this.parameters={},this.tokenLease=void 0}async login(){try{if(!this.loggingIn){if(this.loggingIn=!0,this.tokenLease>Date.now())return;this.tokenLease&&this.console.log(`token expired at ${this.tokenLease}, renewing...`);const{parameters:e,leaseTimeSeconds:t}=await(0,i.getLoginParameters)(this.host,this.username,this.password,this.forceToken);this.parameters=e,this.tokenLease=Date.now()+1e3*t,this.onTokenRefresh({parameters:this.parameters,tokenLease:this.tokenLease}),this.loggingIn=!1,this.console.log(`New token: ${e.token}`)}}finally{this.loggingIn=!1}}async requestWithLogin(e,t){await this.login();const r=e.url.searchParams;for(const[e,t]of Object.entries(this.parameters))r.set(e,t);return this.request(e,t)}async getVideoClips(e,t="main"){const r=new URL(`http://${this.host}/api.cgi`),n=new Date(e.startTime);let o=e.endTime?new Date(e.endTime):void 0;(!o||o.getDate()>n.getDate())&&(o=new Date(n),o.setHours(23),o.setMinutes(59),o.setSeconds(59));const i=[{cmd:"Search",action:1,param:{Search:{channel:this.channelId,streamType:t,onlyStatus:0,StartTime:{year:n.getFullYear(),mon:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),min:n.getMinutes(),sec:n.getSeconds()},EndTime:{year:o.getFullYear(),mon:o.getMonth()+1,day:o.getDate(),hour:o.getHours(),min:o.getMinutes(),sec:o.getSeconds()}}}}];try{const e=await this.requestWithLogin({url:r,responseType:"json",method:"POST"},this.createReadable(i)),t=e.body?.[0]?.error;return t?(this.console.log("Error fetching videoclips",t,JSON.stringify({body:i,url:r})),[]):e.body?.[0]?.value?.SearchResult?.File??[]}catch(e){return this.console.log("Error fetching videoclips",e),[]}}async getVideoClipUrl(e,t){const r=e.split("/").pop(),n=r.split(".").shift();let o=e.replaceAll(" ","%20");o.startsWith("/")||(o=`/${o}`);const i=`api.cgi?cmd=Download&source=${o}&output=${r}&token=${this.parameters.token}`,s=`cgi-bin/api.cgi?cmd=Playback&source=${o}&output=${o}&token=${this.parameters.token}`;return{downloadPath:i,playbackPath:s,downloadPathWithHost:`http://${this.host}/${i}`,playbackPathWithHost:`http://${this.host}/${s}`,fileName:n,fileNameWithExtension:r}}async jpegSnapshot(e=1e4){const t=new URL(`http://${this.host}/cgi-bin/api.cgi`),r=t.searchParams;r.set("cmd","Snap"),r.set("snapType","main"),r.set("channel",this.channelId.toString()),r.set("rs",Date.now().toString());return(await this.requestWithLogin({url:t,timeout:e})).body}async getBatteryInfo(){const e=new URL(`http://${this.host}/api.cgi`),t=[{cmd:"GetBatteryInfo",action:0,param:{channel:this.channelId}},{cmd:"GetChannelstatus"}],r=await this.requestWithLogin({url:e,responseType:"json",method:"POST"},this.createReadable(t)),n=r.body?.find((e=>e.error))?.error;n&&this.console.error("error during call to getBatteryInfo",n);const o=r.body.find((e=>"GetBatteryInfo"===e.cmd))?.value?.Battery,i=r.body.find((e=>"GetChannelstatus"===e.cmd))?.value?.status?.find((e=>e.channel===this.channelId));return{batteryPercent:o?.batteryPercent,sleep:i?1===i.sleep:void 0}}async getWhiteLed(){const e=new URL(`http://${this.host}/api.cgi`),t=[{cmd:"GetWhiteLed",action:0,param:{channel:this.channelId}}],r=await this.requestWithLogin({url:e,responseType:"json",method:"POST"},this.createReadable(t)),n=r.body?.find((e=>e.error))?.error;return n&&this.console.error("error during call to getWhiteLed",n),r.body[0]}}},7927:function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&o(t,e,r[s]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=s(r(7562)),u=r(6117),d=r(6185),p=a(r(2112)),l=a(r(8611));class h extends c.ScryptedDeviceBase{constructor(e){super(e),this.storageSettings=new u.StorageSettings(this,{downloadFolder:{title:"Directory where to cache thumbnails and videoclips",description:"Default to the plugin folder",type:"string"},clearDownloadedData:{title:"clear stored data",type:"button",onPut:async()=>await(0,d.cleanup)(this.storageSettings.values.downloadFolder)}}),this.mixinsMap={}}async onRequest(e,t){const r=new URL(`http://localhost${e.url}`),n=r.searchParams.get("params")??"{}";try{const[o,i,s,a,u,d]=r.pathname.split("/"),{deviceId:p,videoclipPath:h,parameters:f}=JSON.parse(n),m=this.mixinsMap[p],g=m.console;try{if("videoclip"===d){if(m.storageSettings.values.ftp)return void t.sendFile(h);{const r=await m.getClient(),{playbackPathWithHost:n}=await r.getVideoClipUrl(h,p),o=async()=>new Promise(((r,o)=>{l.default.get(n,{headers:e.headers},(n=>{if(400!==n.statusCode[0])try{t.sendStream(async function*(){for await(const e of n)yield e}(),{headers:n.headers}),r()}catch(e){o(e)}else o(new Error(`Error loading the video: ${n.statusCode} - ${n.statusMessage}. Headers: ${JSON.stringify(e.headers)}`))})).on("error",(e=>{g.log("Error fetching videoclip",e),o(e)}))}));try{return void await o()}catch(e){g.log("Error fetching videoclip",e)}}}else if("thumbnail"===d){g.log(`Thumbnail requested: ${JSON.stringify({videoclipPath:h,deviceId:p})}`);const e=await m.getVideoClipThumbnail(h),r=await c.default.mediaManager.convertMediaObjectToBuffer(e,"image/jpeg");return void t.send(r,{headers:{"Content-Type":"image/jpeg"}})}}catch(e){return g.log("Error in webhook",e),void t.send(`${JSON.stringify(e)}, ${e.message}`,{code:400})}return void t.send(`Webhook not found: ${r.pathname}`,{code:404})}catch(r){this.console.log("Error in data parsing for webhook",r),t.send(`Error in data parsing for webhook: ${JSON.stringify({params:n,url:e.url})}`,{code:500})}}async getSettings(){return await this.storageSettings.getSettings()}putSetting(e,t){return this.storageSettings.putSetting(e,t)}async canMixin(e,t){return[c.ScryptedInterface.Camera,c.ScryptedInterface.VideoCamera].some((e=>t.includes(e)))?[c.ScryptedInterface.Settings,c.ScryptedInterface.VideoClips,c.ScryptedInterface.Camera]:void 0}async getMixin(e,t,r){return new p.default({mixinDevice:e,mixinDeviceInterfaces:t,mixinDeviceState:r,mixinProviderNativeId:this.nativeId,group:"Reolink videoclips",groupKey:"reolinkVideoclips"},this)}async releaseMixin(e,t){await t.release()}}t.default=h},6185:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.splitDateRangeByDay=t.parseVideoclipName=t.findStartTimeFromFileName=t.getThumbnailMediaObject=t.cleanup=t.getFolderPaths=void 0;const o=n(r(6928)),i=n(r(9896)),s=n(r(7016)),a=n(r(7562)),{mediaManager:c}=a.default;t.getFolderPaths=(e,t)=>{let r=t;r||(r=process.env.SCRYPTED_PLUGIN_VOLUME);const n=o.default.join(r,"thumbnails",e);return i.default.existsSync(n)||i.default.mkdirSync(n,{recursive:!0}),{thumbnailFolder:n}};t.cleanup=e=>{let t=e;t||(t=process.env.SCRYPTED_PLUGIN_VOLUME);const r=o.default.join(t,"thumbnails");i.default.existsSync(r)&&i.default.rmSync(r,{recursive:!0,force:!0})};t.getThumbnailMediaObject=async e=>{const{filename:t,thumbnailFolder:r,videoclipUrl:n,console:a}=e,u=t.replaceAll(" ","_"),d=o.default.join(r,`${u}.jpg`);let p;try{if(i.default.existsSync(d)&&0===i.default.statSync(d).size&&(a.log(`Thumbnail ${d} corrupted, removing.`),i.default.rmSync(d)),!i.default.existsSync(d)){a.log(`Thumbnail not found in ${d}, generating.`);const e=await c.createFFmpegMediaObject({inputArguments:["-ss","00:00:05","-i",n]}),t=await c.convertMediaObjectToBuffer(e,"image/jpeg");t.length?(a.log(`Saving thumbnail in ${d}`),await i.default.promises.writeFile(d,t)):a.log("Not saving, image is corrupted")}if(i.default.existsSync(d)){const e=s.default.pathToFileURL(d).toString();p=await c.createMediaObjectFromUrl(e)}return{thumbnailMo:p}}catch(e){return a.log(`Error retrieving thumbnail of videoclip ${u} (${n})`,e),i.default.existsSync(d)&&i.default.rmSync(d),{}}};t.findStartTimeFromFileName=e=>{const t=/.*Rec(\w{3})(?:_|_DST)(\d{8})_(\d{6})_.*/gm;let r;const n=[];for(;null!==(r=t.exec(e));)r.index===t.lastIndex&&t.lastIndex++,r.forEach(((e,t)=>{n.push(e)}));return`${n[2]}${n[3]}`};const u={resolution_index:[0,7],tv_system:[7,1],framerate:[8,7],audio_index:[15,2],ai_pd:[17,1],ai_fd:[18,1],ai_vd:[19,1],ai_ad:[20,1],encoder_type_index:[21,2],is_schedule_record:[23,1],is_motion_record:[24,1],is_rf_record:[25,1],is_doorbell_record:[26,1],ai_other:[27,1]},d={resolution_index:[0,7],tv_system:[7,1],framerate:[8,7],audio_index:[15,2],ai_pd:[17,1],ai_fd:[18,1],ai_vd:[19,1],ai_ad:[20,1],encoder_type_index:[21,2],is_schedule_record:[23,1],is_motion_record:[24,1],is_rf_record:[25,1],is_doorbell_record:[26,1],is_ai_other_record:[27,1],picture_layout_index:[28,7],package_delivered:[35,1],package_takenaway:[36,1]},p={cam:{2:u,3:u,4:u,9:u},hub:{0:d,1:{...d,package_event:[37,1]},2:{resolution_index:[0,7],tv_system:[7,1],framerate:[8,7],audio_index:[15,2],ai_pd:[17,1],ai_fd:[18,1],ai_vd:[19,1],ai_ad:[20,1],ai_other:[21,2],encoder_type_index:[23,1],is_schedule_record:[24,1],is_motion_record:[25,1],is_rf_record:[26,1],is_doorbell_record:[27,1],picture_layout_index:[28,7],package_delivered:[35,1],package_takenaway:[36,1],package_event:[37,1],upload_flag:[38,1]}}};t.parseVideoclipName=e=>{try{const t=e.split("/").pop(),r=t.split(".")[0].split("_");let n,o;const i=parseInt(r[0].substring(4,6),16);let s;6===r.length?(s="cam",n=r[4],o=r[5]):9===r.length&&(s="hub",n=r[7],o=r[8]);const a=parseInt(n,16),c=parseInt(a.toString(2).padStart(4*n.length,"0").split("").reverse().join(""),2),u={},d=p[s][i];for(const[e,[t,r]]of Object.entries(d)){const n=parseInt(((c&(1<<r)-1<<t)>>t).toString(2).padStart(r,"0").split("").reverse().join(""),2);u[e]=n}const l=Number(`0x${o}`),h=[];return 1===u.ai_pd&&h.push("person"),1===u.ai_vd&&h.push("vehicle"),1===u.ai_fd&&h.push("face"),1===u.ai_ad&&h.push("animal"),1!==u.is_motion_record&&1!==u.ai_other||h.push("motion"),{size:l,detectionClasses:h}}catch(e){console.log("Error parsing the filename",e)}};t.splitDateRangeByDay=(e,t)=>{const r=[];let n=new Date(e);const o=new Date(t);for(;n<=o;){const e=new Date(n);e.setHours(23,59,59,999);const t=o<e?o:e;if(r.push({start:new Date(n).getTime(),end:new Date(t).getTime()}),t>=o)break;n=new Date(t.getTime()+1)}return r}},6125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authHttpFetch=void 0;const n=r(4171),o=r(5892);t.authHttpFetch=(0,o.createAuthFetch)(n.httpFetch,n.httpFetchParseIncomingMessage)},5892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAuthFetch=function(e,t){return async i=>{const s=(0,n.getFetchMethod)(i),a=(0,n.createHeadersArray)(i.headers);i.headers=a,(0,n.setDefaultHttpFetchAccept)(a,i.responseType);const c=await o(i,i.url,s);c&&!(0,n.hasHeader)(a,"Authorization")&&(0,n.setHeader)(a,"Authorization",c);const u=new AbortController;i.signal?.addEventListener("abort",(()=>u.abort(i.signal?.reason)));const d=await e({...i,signal:u.signal,checkStatusCode(e){if(401===e&&i.credential)return!0;if(void 0===i?.checkStatusCode||i?.checkStatusCode){return("function"==typeof i?.checkStatusCode?i.checkStatusCode:n.checkStatus)(e)}return!0},responseType:"readable"});if(401!==d.statusCode)return{...d,body:await t(d.body,i.responseType)};let p=d.headers.get("www-authenticate");if(!p)throw new Error("Did not find WWW-Authenticate header.");"string"==typeof p&&(p=[p]);const{BASIC:l,DIGEST:h,parseWWWAuthenticateHeader:f}=await Promise.resolve().then(r.bind(r,841)),m=p.map((e=>f(e))),g=m.find((e=>"Digest"===e.type)),y=m.find((e=>"Basic"===e.type)),v=i.credential;if(v.digest=g,v.basic=y,!g&&!y)throw new Error(`Unknown WWW-Authenticate type: ${m[0]?.type}`);const S=await o(i,i.url,s);return S&&(0,n.setHeader)(a,"Authorization",S),e(i)}};const n=r(7796);async function o(e,t,n){if(!e.credential)return;const{BASIC:o,DIGEST:i,parseWWWAuthenticateHeader:s}=await Promise.resolve().then(r.bind(r,841)),a=e.credential,{digest:c,basic:u}=a;if(c){a.count||=0,++a.count;const o=("00000000"+a.count).slice(-8),i=[...Array(24)].map((()=>Math.floor(16*Math.random()).toString(16))).join(""),s=new URL(t).pathname,{DIGEST:u,buildAuthorizationHeader:d}=await Promise.resolve().then(r.bind(r,841)),p=u.computeHash({username:e.credential.username,password:e.credential.password,method:n,uri:s,nc:o,cnonce:i,algorithm:"MD5",qop:c.data.qop,...c.data});return d(u,{username:e.credential.username,uri:s,nc:o,cnonce:i,algorithm:c.data.algorithm,qop:c.data.qop,response:p,...c.data})}if(u){const{BASIC:t,buildAuthorizationHeader:n}=await Promise.resolve().then(r.bind(r,841));return n(t,{username:e.credential.username,password:e.credential.password})}}},145:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.reolinkHttpsAgent=void 0,t.getDeviceInfo=async function(e,t,r){const n=await a(e,t,r);return s(e,n.parameters)},t.getLoginParameters=a;const o=n(r(5692)),i=r(4171);async function s(e,t){const r=new URL(`http://${e}/api.cgi`),n=r.searchParams;n.set("cmd","GetDevInfo");for(const[e,r]of Object.entries(t))n.set(e,r);const o=await(0,i.httpFetch)({url:r,responseType:"json"}),s=o.body?.[0]?.error;if(s)throw new Error("error during call to getDeviceInfo");const a=o.body?.[0]?.value?.DevInfo;if(!a?.type&&!a?.model&&!a?.exactType)throw new Error("device info return unexpected data");return a}async function a(e,t,r,n){if(!n)try{return await s(e,{user:t,password:r}),{parameters:{user:t,password:r},leaseTimeSeconds:1/0}}catch(e){}try{const n=new URL(`http://${e}/api.cgi`);n.searchParams.set("cmd","Login");const o=await(0,i.httpFetch)({url:n,method:"POST",responseType:"json",rejectUnauthorized:!1,body:[{cmd:"Login",action:0,param:{User:{userName:t,password:r}}}]}),s=o.body?.[0]?.value?.Token?.name||o.body?.value?.Token?.name;if(!s)throw new Error("unable to login");const{body:a}=o;return{parameters:{token:s},leaseTimeSeconds:a?.[0]?.value?.Token.leaseTime||a?.value?.Token.leaseTime}}catch(e){return{parameters:{user:t,password:r},leaseTimeSeconds:60}}}t.reolinkHttpsAgent=new o.default.Agent({rejectUnauthorized:!1})},4171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHttpFetchParser=u,t.httpFetchParseIncomingMessage=d,t.httpFetch=async function(e){const t=(0,n.createHeadersArray)(e.headers);(0,n.setDefaultHttpFetchAccept)(t,e.responseType);const{once:i}=r(4434),{PassThrough:s,Readable:a}=r(2203),{http:c,https:u}=r(1783),{url:p}=e,l=p.toString().startsWith("https:")?u:c;let h,f,{body:m}=e;if(m&&!(m instanceof a)){const e=new s;e.write(Buffer.from((0,n.createStringOrBufferBody)(t,m))),e.end(),m=e}e.timeout&&(h=new AbortController,f=setTimeout((()=>h.abort()),e.timeout),e.signal?.addEventListener("abort",(()=>h.abort(e.signal?.reason))));const g=h?.signal||e.signal;g?.addEventListener("abort",(()=>v.destroy(new Error(e.signal?.reason||"abort"))));const y={};for(const[e,r]of t)y[e]?y[e].push(r):y[e]=[r];const v=l.request(p,{method:(0,n.getFetchMethod)(e),rejectUnauthorized:e.rejectUnauthorized,family:e.family,headers:y,signal:g,timeout:e.timeout});m?m.pipe(v):v.end();try{const[t]=await i(v,"response");if(void 0===e?.checkStatusCode||e?.checkStatusCode)try{const r="function"==typeof e?.checkStatusCode?e.checkStatusCode:n.checkStatus;if(!t.statusCode||!r(t.statusCode))throw new Error(`http response statusCode ${t.statusCode}`)}catch(e){throw o(t).catch((()=>{})),e}const r=new Headers;for(const[e,n]of Object.entries(t.headers))for(const t of"string"==typeof n?[n]:n)r.append(e,t);return{statusCode:t.statusCode,headers:r,body:await d(t,e.responseType)}}finally{clearTimeout(f)}};const n=r(7796);async function o(e){const t=[];e.on("data",(e=>t.push(e)));const{once:n}=r(4434);return await n(e,"end"),Buffer.concat(t)}const i={parse:async e=>(await o(e)).toString()},s={parse:async e=>JSON.parse((await o(e)).toString())},a={parse:async e=>o(e)},c={parse:async e=>e};function u(e){switch(e){case"json":return s;case"text":return i;case"readable":return c}return a}function d(e,t){return u(t).parse(e)}},7796:(e,t)=>{"use strict";function r(e){return e>=200&&e<=299}function n(e){if(!r(e))throw new Error(`http response statusCode ${e}`);return!0}function o(e){return e.method||(e.body?"POST":"GET")}function i(e){switch(e){case"json":return"application/json";case"text":return"text/plain"}}function s(e,t){return t=t.toLowerCase(),e.find((([e])=>e.toLowerCase()===t))}function a(e,t){t=t.toLowerCase();const r=e.filter((([e,r])=>e.toLowerCase()!==t));e.length=0,r.forEach((t=>e.push(t)))}function c(e,t,r){a(e,t),e.push([t,r])}function u(e,t){if(s(e,"Accept"))return;const r=i(t);r&&c(e,"Accept",r)}function d(e){const t=[];if(!e)return t;if(e instanceof Headers){for(const[r,n]of e.entries())t.push([r,n]);return t}if(e instanceof Array){for(const[r,n]of e)t.push([r,n]);return t}for(const r of Object.keys(e)){const n=e[r];t.push([r,n])}return t}function p(e,t){let r;return"object"==typeof t?(t=JSON.stringify(t),r="application/json"):"string"==typeof t&&(r="text/plain"),r&&!s(e,"Content-Type")&&c(e,"Content-Type",r),s(e,"Content-Length")||c(e,"Content-Length",(t=Buffer.from(t)).length.toString()),t}async function l(e,t){switch(t){case"json":return e.json();case"text":return e.text();case"readable":return e}return new Uint8Array(await e.arrayBuffer())}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchStatusCodeOk=r,t.checkStatus=n,t.getFetchMethod=o,t.getHttpFetchAccept=i,t.hasHeader=s,t.removeHeader=a,t.setHeader=c,t.setDefaultHttpFetchAccept=u,t.createHeadersArray=d,t.createStringOrBufferBody=p,t.domFetchParseIncomingMessage=l,t.domFetch=async function(e){const t=d(e.headers);u(t,e.responseType);let r,i,{body:s}=e;!s||s instanceof ReadableStream||(s=p(t,s));e.timeout&&(r=new AbortController,i=setTimeout((()=>r.abort()),e.timeout),e.signal?.addEventListener("abort",(()=>r.abort(e.signal?.reason))));try{const{url:i}=e,a=await fetch(i,{method:o(e),credentials:e.withCredentials?"include":void 0,headers:t,signal:r?.signal||e.signal,body:s});if(void 0===e?.checkStatusCode||e?.checkStatusCode)try{if(!("function"==typeof e?.checkStatusCode?e.checkStatusCode:n)(a.status))throw new Error(`http response statusCode ${a.status}`)}catch(e){throw a.arrayBuffer().catch((()=>{})),e}return{statusCode:a.status,headers:a.headers,body:await l(a,e.responseType)}}finally{clearTimeout(i)}}},5336:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(5175)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},5175:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,i,s=null;function a(...e){if(!a.enabled)return;const n=a,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const i=t.formatters[o];if("function"==typeof i){const t=e[s];r=i.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+("undefined"==typeof r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(2726),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},6556:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(5336):e.exports=r(3482)},3482:(e,t,r)=>{const n=r(2018),o=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(o.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:o}=this;if(o){const t=this.color,o="[3"+(t<8?t:"8;5;"+t),i=`  ${o};1m${n} [0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(o+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=o.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(Object(function(){var e=new Error("Cannot find module 'supports-color'");throw e.code="MODULE_NOT_FOUND",e}()));e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=r(5175)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},4376:(e,t,r)=>{var n;e.exports=function(){if(!n){try{n=r(6556)("follow-redirects")}catch(e){}"function"!=typeof n&&(n=function(){})}n.apply(null,arguments)}},1783:(e,t,r)=>{var n,o,i,s=r(7016),a=s.URL,c=r(8611),u=r(5692),d=r(2203).Writable,p=r(2613),l=r(4376);n="undefined"!=typeof process,o="undefined"!=typeof window&&"undefined"!=typeof document,i=R(Error.captureStackTrace),n||!o&&i||console.warn("The follow-redirects package should be excluded from browser builds.");var h=!1;try{p(new a(""))}catch(e){h="ERR_INVALID_URL"===e.code}var f=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],m=["abort","aborted","connect","error","socket","timeout"],g=Object.create(null);m.forEach((function(e){g[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}}));var y=T("ERR_INVALID_URL","Invalid URL",TypeError),v=T("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),S=T("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",v),b=T("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),_=T("ERR_STREAM_WRITE_AFTER_END","write after end"),C=d.prototype.destroy||O;function w(e,t){d.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){try{r._processResponse(e)}catch(e){r.emit("error",e instanceof v?e:new v({cause:e}))}},this._performRequest()}function x(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(n){var o=n+":",i=r[o]=e[n],s=t[n]=Object.create(i);Object.defineProperties(s,{request:{value:function(e,n,i){var s;return s=e,a&&s instanceof a?e=j(e):I(e)?e=j(D(e)):(i=n,n=P(e),e={protocol:o}),R(n)&&(i=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,I(n.host)||I(n.hostname)||(n.hostname="::1"),p.equal(n.protocol,o,"protocol mismatch"),l("options",n),new w(n,i)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var n=s.request(e,t,r);return n.end(),n},configurable:!0,enumerable:!0,writable:!0}})})),t}function O(){}function D(e){var t;if(h)t=new a(e);else if(!I((t=P(s.parse(e))).protocol))throw new y({input:e});return t}function P(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new y({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new y({input:e.href||e});return e}function j(e,t){var r=t||{};for(var n of f)r[n]=e[n];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),""!==r.port&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}function M(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return null===r||"undefined"==typeof r?void 0:String(r).trim()}function T(e,t,r){function n(r){R(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,r||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return n.prototype=new(r||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),n}function k(e,t){for(var r of m)e.removeListener(r,g[r]);e.on("error",O),e.destroy(t)}function I(e){return"string"==typeof e||e instanceof String}function R(e){return"function"==typeof e}w.prototype=Object.create(d.prototype),w.prototype.abort=function(){k(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},w.prototype.destroy=function(e){return k(this._currentRequest,e),C.call(this,e),this},w.prototype.write=function(e,t,r){if(this._ending)throw new _;if(!I(e)&&("object"!=typeof(n=e)||!("length"in n)))throw new TypeError("data should be a string, Buffer or Uint8Array");var n;R(t)&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new b),this.abort()):r&&r()},w.prototype.end=function(e,t,r){if(R(e)?(r=e,e=t=null):R(t)&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,(function(){n._ended=!0,o.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},w.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},w.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},w.prototype.setTimeout=function(e,t){var r=this;function n(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function o(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.emit("timeout"),i()}),e),n(t)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),r.removeListener("close",i),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){w.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(w.prototype,e,{get:function(){return this._currentRequest[e]}})})),w.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},w.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o of(n._redirectable=this,m))n.on(o,g[o]);if(this._currentUrl=/^\//.test(this._options.path)?s.format(this._options):this._options.path,this._isRedirect){var i=0,a=this,c=this._requestBodyBuffers;!function e(t){if(n===a._currentRequest)if(t)a.emit("error",t);else if(i<c.length){var r=c[i++];n.finished||n.write(r.data,r.encoding,e)}else a._ended&&n.end()}()}},w.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r,n=e.headers.location;if(!n||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(k(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new S;var o=this._options.beforeRedirect;o&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],M(/^content-/i,this._options.headers));var c,u,d=M(/^host$/i,this._options.headers),f=D(this._currentUrl),m=d||f.host,g=/^\w+:/.test(n)?this._currentUrl:s.format(Object.assign(f,{host:m})),y=(c=n,u=g,h?new a(c,u):D(s.resolve(u,c)));if(l("redirecting to",y.href),this._isRedirect=!0,j(y,this._options),(y.protocol!==f.protocol&&"https:"!==y.protocol||y.host!==m&&!function(e,t){p(I(e)&&I(t));var r=e.length-t.length-1;return r>0&&"."===e[r]&&e.endsWith(t)}(y.host,m))&&M(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),R(o)){var v={headers:e.headers,statusCode:t},b={url:g,method:i,headers:r};o(this._options,v,b),this._sanitizeOptions(this._options)}this._performRequest()},e.exports=x({http:c,https:u}),e.exports.wrap=x},2726:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,i=7*o,s=365.25*o;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=o)return a(e,i,o,"day");if(i>=n)return a(e,i,n,"hour");if(i>=r)return a(e,i,r,"minute");if(i>=t)return a(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=o)return Math.round(e/o)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2613:e=>{"use strict";e.exports=require("assert")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},3339:e=>{"use strict";e.exports=require("module")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},2018:e=>{"use strict";e.exports=require("tty")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},841:(e,t,r)=>{"use strict";r.d(t,{BASIC:()=>f,DIGEST:()=>w,buildAuthorizationHeader:()=>M,parseWWWAuthenticateHeader:()=>j});const n=require("os");class o extends Error{code;params;wrappedErrors;constructor(e,t,...r){e instanceof Array||(r=("undefined"==typeof t?[]:[t]).concat(r),t=e,e=[]),super(t),this.code=t||"E_UNEXPECTED",this.params=r,this.wrappedErrors=e,this.name=this.toString(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}static wrap(e,t,...r){const n=s(e.message),i=("wrappedErrors"in e?e.wrappedErrors:[]).concat(e);return t||(t=n?e.message:"E_UNEXPECTED"),e.message&&!n&&r.push(e.message),new o(i,t,...r)}static cast(e,t,...r){return i(e)?e:o.wrap(e,t,...r)}static bump(e,t,...r){return i(e)?o.wrap(e,e.code,...e.params):o.wrap(e,t,...r)}toString(){return(this.wrappedErrors.length?this.wrappedErrors[this.wrappedErrors.length-1].stack+n.EOL:"")+this.constructor.name+": "+this.code+" ("+this.params.join(", ")+")"}}function i(e){return!!(e instanceof o)||!!(e.constructor&&e.constructor.name&&e.constructor.name.endsWith("Error")&&"code"in e&&"string"==typeof e.code&&s(e.code)&&"params"in e&&e.params&&e.params instanceof Array)}function s(e){return/^([A-Z0-9_]+)$/.test(e)}const a=/\w+=(".*?"|[^",]+)(?=,|$)/g;function c(e,t,r=[],n=[]){const i=e.trim().match(a);if(!i)throw new o("E_MALFORMED_QUOTEDKEYVALUE",e);const s=i.map(((e,t)=>{const[r,...n]=e.split("="),i=n.join("=");if(0===n.length)throw new o("E_MALFORMED_QUOTEDKEYVALUE",t,e);return[r,i]})).reduce((function(e,[r,i],s){const a=r.toLowerCase();if(-1===t.indexOf(a))throw new o("E_UNAUTHORIZED_KEY",s,a);const c=i.replace(/^"(.+(?="$))"$/,"$1");return e[a]=n.includes(a)?c.toLowerCase():c,e}),{});return d(r,s),s}function u(e,t,r=[]){return d(r,e),t.reduce((function(t,r){return e[r]?t+(t?", ":"")+r+'="'+e[r]+'"':t}),"")}function d(e,t){e.forEach((e=>{if("undefined"==typeof t[e])throw new o("E_REQUIRED_KEY",e)}))}const p=["realm"],l=p,h={type:"Basic",parseWWWAuthenticateRest:function(e){return c(e,l,p)},buildWWWAuthenticateRest:function(e){return u(e,l,p)},parseAuthorizationRest:function(e){if(!e)throw new o("E_EMPTY_AUTH");const{username:t,password:r}=h.decodeHash(e);return{hash:e,username:t,password:r}},buildAuthorizationRest:function({hash:e,username:t,password:r}){if(t&&r)return h.computeHash({username:t,password:r});if(!e)throw new o("E_NO_HASH");return e},computeHash:function({username:e,password:t}){return Buffer.from(e+":"+t).toString("base64")},decodeHash:function(e){const[t,...r]=Buffer.from(e,"base64").toString().split(":");return{username:t,password:r.join(":")}}},f=h,m=require("crypto"),g=["realm","nonce"],y=[...g,"domain","opaque","stale","algorithm","qop"],v=["stale"],S=["username","realm","nonce","uri","response"],b=[...S,"algorithm","cnonce","opaque","qop","nc"],_={type:"Digest",parseWWWAuthenticateRest:function(e){return c(e,y,g,v)},buildWWWAuthenticateRest:function(e){return u(e,y,g)},parseAuthorizationRest:function(e){return c(e,b,S)},buildAuthorizationRest:function(e){return u(e,b,S)},computeHash:function(e){const t=e.ha1||C(e.algorithm,[e.username,e.realm,e.password].join(":")),r=C(e.algorithm,[e.method,e.uri].join(":"));return C(e.algorithm,[t,e.nonce,e.nc,e.cnonce,e.qop,r].join(":"))}};function C(e,t){const r=m.createHash(e);return r.update(t),r.digest("hex")}const w=_,x=["invalid_request","invalid_token","insufficient_scope"],O=["realm","scope","error","error_description"],D={type:"Bearer",parseWWWAuthenticateRest:function(e){return c(e,O,[])},buildWWWAuthenticateRest:function(e){if(e.error&&-1===x.indexOf(e.error))throw new o("E_INVALID_ERROR",e.error,x);return u(e,O,[])},parseAuthorizationRest:function(e){if(!e)throw new o("E_EMPTY_AUTH");return{hash:e}},buildAuthorizationRest:function({hash:e}){if(!e)throw new o("E_NO_HASH");return e}},P=[f,_,D];function j(e,t=P,{strict:r=!0}={strict:!0}){let n=null;if(t.some((t=>(0===e.indexOf(t.type+" ")||!r&&0===e.indexOf(t.type.toLowerCase()+" "))&&(n={type:t.type,data:t.parseWWWAuthenticateRest(e.substr(t.type.length+1))},!0))),!n)throw new o("E_UNKNOWN_AUTH_MECHANISM",e);return n}function M(e,t){return`${e.type} ${e.buildAuthorizationRest(t)}`}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n=r(7927),o=exports="undefined"==typeof exports?{}:exports;for(var i in n)o[i]=n[i];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=main.nodejs.js.map